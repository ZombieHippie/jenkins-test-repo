clone:
  depth: 10
cache:
  mount:
    - node_modules
    - .git
environment:
  - CLICOLOR_FORCE=1
  - FORCE_COLOR=1

build:
  image: node:6
  commands:
    - netstat -nr | grep '^0\.0\.0\.0' | awk '{print $2}'
    - npm install --quiet --color --unsafe-perm
    - npm test --quiet --color --unsafe-perm
publish:
  sftp:
    host: 127.0.0.1
    port: 22
    username: $$COVERAGE_USER_NAME
    password: $$COVERAGE_USER_PASSWORD
    destination_path: /var/www/coverage/$$BRANCH
    files:
      - lint.xml
      - coverage/*